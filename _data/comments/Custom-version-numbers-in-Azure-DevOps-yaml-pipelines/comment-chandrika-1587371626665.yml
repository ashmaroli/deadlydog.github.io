_id: a67c7c10-82e1-11ea-8045-89d3d72297e8
message: "Hi,\r\nIn my YAML script i had written 3 counters to increment version numbers based on the value selected at run time.\r\nversion format : major.minor.patch\r\n\r\nmajor (major_version_no) & minor (minor_version_no) counters are working fine. But patch counter (patch_version_no) is not getting reset whenever 'majorminor' value changes.\r\nPatch counter keep increasing based on old value.\r\n\r\nCan you please help me to find out the issue here ?\r\n\r\nparameters:\r\n- name: change_type\r\n  displayName: Select type of Change/Release\r\n  type: string\r\n  default: patch\r\n  values:\r\n  - major\r\n  - minor\r\n  - patch\r\n\r\ntrigger:\r\n- none\r\nvariables:\r\n- group: DEVOPS_VAR_CRED\r\n- group: PROD_VERSIONS\r\n\r\npool:\r\n  vmImage: 'ubuntu-latest'\r\nstages:\r\n- stage:\r\n  condition: and(succeeded(), eq(variables['Build.SourceBranchName'], 'master'))\r\n  jobs:\r\n  - job: \r\n    displayName: Setup_Master_Branch_Version_Number \r\n    variables:\r\n      change_type: ${{ parameters.change_type }}\r\n      majorminor: $(major).$(minor)\r\n      ${{ if eq(parameters.change_type, 'major') }}:\r\n       major_version_no: $[counter(variables['change_type'],2)]\r\n       minor_version_no: 0\r\n       patch_version_no: 0\r\n      ${{ if eq(parameters.change_type, 'minor') }}:\r\n       minor_version_no: $[counter(variables['major'], 1)]\r\n       major_version_no: $(major)\r\n       patch_version_no: 0\r\n      ${{ if eq(parameters.change_type, 'patch') }}:\r\n       patch_version_no: $[counter(variables['majorminor'], 1)]\r\n       major_version_no: $(major)\r\n       minor_version_no: $(minor)"
name: chandrika
email: 5daa198d39ab82ff28b17b520ee07eb2
url: ''
hidden: ''
date: '2020-04-20T08:33:46.657Z'
